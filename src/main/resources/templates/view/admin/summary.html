<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<div>
    <ul>
        <li th:text="'총 회원 수 : ' + ${memberSummary.getTotalCount()}">totalMemberCount</li>
        <li th:text="'활성화 회원 수 : ' + ${memberSummary.getActiveCount()}">activeMemberCount</li>
        <li th:text="'비활성화 회원 수 : ' + ${memberSummary.getInactiveCount()}">deletedMemberCount</li>
    </ul>

</div>


<br>

<h2>언어별 코드 리뷰 게시글 수</h2>
<div>
    <table>
        <thead>
        <tr>Language Name</tr>
        <tr>Count</tr>
        </thead>

        <tbody th:each="codeReviews:${codeReviewSummaryByLanguage}">
        <tr>
            <td th:text="${codeReviews.languageName}">name</td>
            <td th:text="${codeReviews.totalCount}">count</td>
        </tr>
        </tbody>
    </table>
</div>

<br>

<label>
    <input type="month" id="search-input">
    <button type="button" onclick="search()">검색</button>
</label>
<br>

<h2>코드 리뷰 게시글 요약</h2>
<div>
    <table>
        <thead>
        <tr>Month</tr>
        <tr>Count</tr>
        </thead>

        <tbody th:each="codeReviews:${codeReviewSummaryByMonth}">
        <tr>
            <td th:text="${codeReviews.month} + '월'">name</td>
            <td th:text="${codeReviews.count}">count</td>
        </tr>
        </tbody>
    </table>
</div>

<br>

<h2>댓글 요약</h2>
<div>
    <table>
        <thead>
        <tr>Month</tr>
        <tr>Count</tr>
        </thead>

        <tbody th:each="codeReviewComments:${codeReviewCommentSummaryByMonth}">
        <tr>
            <td th:text="${codeReviewComments.month} + '월'">name</td>
            <td th:text="${codeReviewComments.count}">count</td>
        </tr>
        </tbody>
    </table>
</div>

<br>
<h2>좋아요 요약</h2>
<div>
    <table>
        <thead>
        <tr>Month</tr>
        <tr>Count</tr>
        </thead>

        <tbody th:each="codeReviewPreference:${codeReviewPreferenceSummaryByMonth}">
        <tr>
            <td th:text="${codeReviewPreference.month} + '월'">name</td>
            <td th:text="${codeReviewPreference.count}">count</td>
        </tr>
        </tbody>
    </table>
</div>

<script>
    function search() {
        const searchInput = document.getElementById('search-input').value;

        if (searchInput) {
            // 선택한 달의 마지막 날 구하기
            const [year, month] = searchInput.split('-');
            const lastDay = new Date(year, month, 0).getDate(); // 선택된 달의 마지막 날 계산

            // YYYY-MM-DD 형식으로 변환
            const lastDateOfMonth = `${year}-${month}-${lastDay}`;

            // URL 생성 및 이동
            const url = '/admin/summary?searchDate=' + lastDateOfMonth;
            window.location.href = url;
        }
    }

    // 페이지 로드 시 searchDate 값을 월로 설정
    window.onload = function() {
        const urlParams = new URLSearchParams(window.location.search);
        const searchDate = urlParams.get('searchDate');

        if (searchDate) {
            const date = new Date(searchDate);
            const yearMonth = date.toISOString().substring(0, 7); // 'YYYY-MM' 형식으로 변환
            document.getElementById('search-input').value = yearMonth;
        }
    };
</script>

</body>
</html>